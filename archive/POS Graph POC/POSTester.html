<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>POS Tagger Tester</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background: #f5f5f5;
    }

    h1 {
      color: #333;
    }

    .test-result {
      background: white;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .pass {
      color: green;
      font-weight: bold;
    }

    .fail {
      color: red;
      font-weight: bold;
    }

    .log {
      display: none;
      background: #fafafa;
      border-left: 3px solid #ccc;
      margin-top: 0.5rem;
      padding: 0.5rem;
      font-family: monospace;
      white-space: pre-wrap;
    }

    button {
      margin-top: 0.5rem;
      padding: 0.25rem 0.5rem;
      font-size: 0.9rem;
    }
  </style>
</head>

<body>
  <h1>POS Tagger Tester</h1>
  <div id="results"></div>

  <!-- ✅ Pull in your lexicon and tagger -->
  <script src="./js/lexicon.js"></script>
  <script src="./js/POSTaggerGPT.js"></script>

  <script>
    // ✅ Create tagger using your real code
    //const tagger = new POSTagger(lexicon);
    const tagger = new POSTagger(window.POSTAGGER_LEXICON, { debug: true });


    // === Define Test Cases ===
    const testCases = [
      {
        sentence: "They're going home.",
        expected: [["They", "PRP"], ["'re", "VBP"], ["going", "VBG"], ["home", "NN"], [".", "."]]
      },
      {
        sentence: "He won't leave.",
        expected: [["He", "PRP"], ["wo", "MD"], ["n't", "RB"], ["leave", "VB"], [".", "."]]
      },
      {
        sentence: "She can't sing.",
        expected: [["She", "PRP"], ["ca", "MD"], ["n't", "RB"], ["sing", "VB"], [".", "."]]
      },
      {
        sentence: "He'd finished his work.",
expected: [
    ["He", "PRP"], 
    ["'d", "MD"], 
    ["finished", "VBN"], 
    ["his", "PRP$"], 
    ["work", "NN"], 
    [".", "."]
]      },
    
  // --- Basic Phrases ---
  {
    sentence: "Red apple",
    expected: [["Red", "JJ"], ["apple", "NN"]]
  },
  {
    sentence: "Quickly run",
    expected: [["Quickly", "RB"], ["run", "VB"]]
  },
  {
    sentence: "Beautiful house",
    expected: [["Beautiful", "JJ"], ["house", "NN"]]
  },
  {
    sentence: "The cat",
    expected: [["The", "DT"], ["cat", "NN"]]
  },
  {
    sentence: "The New York Times",
    expected: [["The", "DT"], ["New", "NNP"], ["York", "NNP"], ["Times", "NNP"]]
  },

  // --- Complex Sentences ---
  {
    sentence: "The old man with a cane walked slowly down the street.",
    expected: [
      ["The", "DT"], ["old", "JJ"], ["man", "NN"], ["with", "IN"], ["a", "DT"], 
      ["cane", "NN"], ["walked", "VBD"], ["slowly", "RB"], ["down", "IN"], 
      ["the", "DT"], ["street", "NN"], [".", "."]
    ]
  },
  {
    sentence: "He gave her the book that she asked for last week.",
    expected: [
      ["He", "PRP"], ["gave", "VBD"], ["her", "PRP"], ["the", "DT"], ["book", "NN"], 
      ["that", "WDT"], ["she", "PRP"], ["asked", "VBD"], ["for", "IN"], 
      ["last", "JJ"], ["week", "NN"], [".", "."]
    ]
  },
  {
    sentence: "She decided to paint the red door, which had been closed for years.",
 expected: [
    ["She", "PRP"], 
    ["decided", "VBD"], 
    ["to", "TO"], 
    ["paint", "VB"], 
    ["the", "DT"], 
    ["red", "JJ"], 
    ["door", "NN"], 
    [",", ","], 
    ["which", "WP"], // Corrected from WDT to WP
    ["had", "VBD"], 
    ["been", "VBN"], 
    ["closed", "VBN"], 
    ["for", "IN"], 
    ["years", "NNS"], 
    [".", "."]
]
  },
  {
    sentence: "Although tired, the runner continued despite the rain.",
    expected: [
      ["Although", "IN"], ["tired", "JJ"], [",", ","], ["the", "DT"], 
      ["runner", "NN"], ["continued", "VBD"], ["despite", "IN"], ["the", "DT"], 
      ["rain", "NN"], [".", "."]
    ]
  },

  // --- Ambiguity Test ---
  // A famous sentence to test if the tagger can distinguish between a verb and a noun.
  {
    sentence: "Time flies like an arrow; fruit flies like a banana.",
    expected: [
      ["Time", "NN"], ["flies", "VBZ"], ["like", "IN"], ["an", "DT"], ["arrow", "NN"], 
      [";", ":"], ["fruit", "NN"], ["flies", "NNS"], ["like", "VBP"], ["a", "DT"], 
      ["banana", "NN"], [".", "."]
    ]
  },
    {
    sentence: "She'll go to the park.",
    expected: [["She", "PRP"], ["'ll", "MD"], ["go", "VB"], ["to", "IN"], ["the", "DT"], ["park", "NN"], [".", "."]]
  },
  {
    sentence: "Don't do that.",
 expected: [["Do","VB"],["n't","RB"],["do","VB"],["that","DT"],[".","."]]  },
  {
    sentence: "The cat's whiskers are long.",
expected: [
    ["The", "DT"],
    ["cat's", "POS"],
    ["whiskers", "NNS"],
    ["are", "VBP"],
    ["long", "JJ"],
    [".", "."]
]  },
  {
    sentence: "Hello!",
    expected: [["Hello", "UH"], ["!", "."]]
  },
  {
    sentence: "She is happy.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "The quick brown fox.",
    expected: [["The", "DT"], ["quick", "JJ"], ["brown", "JJ"], ["fox", "NN"], [".", "."]]
  },
  {
    sentence: "She was happy.",
    expected: [["She", "PRP"], ["was", "VBD"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "He went to the park.",
    expected: [["He", "PRP"], ["went", "VBD"], ["to", "IN"], ["the", "DT"], ["park", "NN"], [".", "."]]
  },
  {
    sentence: "Running is fun.",
    expected: [["Running", "VBG"], ["is", "VBZ"], ["fun", "JJ"], [".", "."]]
  },
  {
    sentence: "The book that I read.",
    expected: [["The", "DT"], ["book", "NN"], ["that", "WDT"], ["I", "PRP"], ["read", "VBD"], [".", "."]]
  },
  {
    sentence: "He is very happy.",
    expected: [["He", "PRP"], ["is", "VBZ"], ["very", "RB"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "She is at the park.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["at", "IN"], ["the", "DT"], ["park", "NN"], [".", "."]]
  },
  {
    sentence: "If it rains, we will stay.",
    expected: [["If", "IN"], ["it", "PRP"], ["rains", "VBZ"], [",", ","], ["we", "PRP"], ["will", "MD"], ["stay", "VB"], [".", "."]]
  },
  {
    sentence: "I like apples, and oranges.",
expected: [
    ["I", "PRP"],
    ["like", "VBP"],
    ["apples", "NNS"],
    [",", ","],
    ["and", "CC"],
    ["oranges", "NNS"],
    [".", "."]
]  },
  {
    sentence: "She enjoys reading books.",
    expected: [["She", "PRP"], ["enjoys", "VBZ"], ["reading", "VBG"], ["books", "NNS"], [".", "."]]
  },
  {
    sentence: "She is happy.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "The quick brown fox.",
    expected: [["The", "DT"], ["quick", "JJ"], ["brown", "JJ"], ["fox", "NN"], [".", "."]]
  },
  {
    sentence: "She is very happy.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["very", "RB"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "The cat sleeps.",
    expected: [["The", "DT"], ["cat", "NN"], ["sleeps", "VBZ"], [".", "."]]
  },
  {
    sentence: "She can run fast.",
    expected: [["She", "PRP"], ["can", "MD"], ["run", "VB"], ["fast", "RB"], [".", "."]]
  },
  {
    sentence: "She loves running.",
    expected: [["She", "PRP"], ["loves", "VBZ"], ["running", "VBG"], [".", "."]]
  },
  {
    sentence: "The dogs' owner is kind.",
    expected: [["The", "DT"], ["dogs'", "POS"], ["owner", "NN"], ["is", "VBZ"], ["kind", "JJ"], [".", "."]]
  },
  {
    sentence: "He is tall and strong.",
    expected: [["He", "PRP"], ["is", "VBZ"], ["tall", "JJ"], ["and", "CC"], ["strong", "JJ"], [".", "."]]
  },
  {
    sentence: "She is taller than him.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["taller", "JJR"], ["than", "IN"], ["him", "PRP"], [".", "."]]
  },
  {
    sentence: "She is the tallest.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["the", "DT"], ["tallest", "JJS"], [".", "."]]
  },
  {
    sentence: "She is not happy.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["not", "RB"], ["happy", "JJ"], [".", "."]]
  },
  {
    sentence: "The book, which I read, is good.",
    expected: [["The", "DT"], ["book", "NN"], [",", ","], ["which", "WP"], ["I", "PRP"], ["read", "VBD"], [",", ","], ["is", "VBZ"], ["good", "JJ"], [".", "."]]
  },
  {
    sentence: "To read is to learn.",
    expected: [["To", "TO"], ["read", "VB"], ["is", "VBZ"], ["to", "TO"], ["learn", "VB"], [".", "."]]
  },
  {
    sentence: "He went to the store.",
    expected: [["He", "PRP"], ["went", "VBD"], ["to", "IN"], ["the", "DT"], ["store", "NN"], [".", "."]]
  },
  {
    sentence: "She is very quickly running.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["very", "RB"], ["quickly", "RB"], ["running", "VBG"], [".", "."]]
  },
  {
    sentence: "She is at the park.",
    expected: [["She", "PRP"], ["is", "VBZ"], ["at", "IN"], ["the", "DT"], ["park", "NN"], [".", "."]]
  },
  {
    sentence: "He said, 'I am happy.'",
expected: [
    ["He", "PRP"],
    ["said", "VBD"],
    [",", ","],
    ["'", "``"],
    ["I", "PRP"],
    ["am", "VBP"],
    ["happy", "JJ"],
    [".", "."],     // The period comes first...
    ["'", "''"]    // ...then the closing quote.
]
  },
  {
    sentence: "She is happy...",
    expected: [["She", "PRP"], ["is", "VBZ"], ["happy", "JJ"], ["...", "ELL"]]
  },
  {
    sentence: `"She said, 'It's a beautiful day!'"`,
expected: [
    ['"', '``'],
    ['She', 'PRP'],
    ['said', 'VBD'],
    [',', ','],
    ["'", '``'],   // Correctly tagged as an OPENING single quote
    ['It', 'PRP'],  // Correctly expanded contraction part 1
    ["'s", 'VBZ'],  // Correctly expanded contraction part 2
    ['a', 'DT'],
    ['beautiful', 'JJ'],
    ['day', 'NN'],
    ['!', '.'],
    ["'", "''"],   // Correctly tagged as a CLOSING single quote
    ['"', "''"]
]  },
  {
    sentence: `"The well-being of the children is important."`,
expected: [
    ['"', '``'],
    ['The', 'DT'],
    ['well-being', 'NN'],
    ['of', 'IN'],
    ['the', 'DT'],
    ['children', 'NNS'],
    ['is', 'VBZ'],   // Correct tag is VBZ (singular)
    ['important', 'JJ'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"I was thinking... maybe we should go."`,
expected: [
    ['"', '``'],
    ['I', 'PRP'],
    ['was', 'VBD'],
    ['thinking', 'VBG'],
    ['...', 'ELL'],
    ['maybe', 'RB'],
    ['we', 'PRP'],
    ['should', 'MD'],
    ['go', 'VB'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"The dog's owner's car is red."`,
expected: [
    ['"', '``'],
    ['The', 'DT'],
    ["dog's", 'POS'],
    ["owner's", 'POS'],
    ['car', 'NN'],
    ['is', 'VBZ'],
    ['red', 'JJ'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"The tall, dark, and handsome man walked by."`,
expected: [
    ['"', '``'],
    ['The', 'DT'],
    ['tall', 'JJ'],
    [',', ','],
    ['dark', 'JJ'],
    [',', ','],
    ['and', 'CC'],
    ['handsome', 'JJ'],
    ['man', 'NN'],
    ['walked', 'VBD'],
    ['by', 'IN'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"She is taller than her brother, but the tallest in her class."`,
expected: [
    ['"', '``'],
    ['She', 'PRP'],
    ['is', 'VBZ'],
    ['taller', 'JJR'],
    ['than', 'IN'],
    ['her', 'PRP$'],
    ['brother', 'NN'],
    [',', ','],
    ['but', 'CC'],
    ['the', 'DT'],
    ['tallest', 'JJS'],
    ['in', 'IN'],
    ['her', 'PRP$'],
    ['class', 'NN'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"He shouldn't have gone there."`,
expected: [
    ['"', '``'],
    ['He', 'PRP'],
    ['should', 'MD'],
    ["n't", 'RB'],
    ['have', 'VB'],
    ['gone', 'VBN'],
    ['there', 'RB'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"He went to the store before the rain started."`,
expected: [
    ['"', '``'],
    ['He', 'PRP'],
    ['went', 'VBD'],
    ['to', 'IN'],
    ['the', 'DT'],
    ['store', 'NN'],
    ['before', 'IN'],
    ['the', 'DT'],
    ['rain', 'NN'],
    ['started', 'VBD'],
    ['.', '.'],
    ['"', "''"]
]  },
  {
    sentence: `"The book, which I borrowed, is excellent."`,
expected: [
    ['"', '``'],
    ['The', 'DT'],
    ['book', 'NN'],
    [',', ','],   // This was the missing comma
    ['which', 'WP'],
    ['I', 'PRP'],
    ['borrowed', 'VBD'],
    [',', ','],
    ['is', 'VBZ'],
    ['excellent', 'JJ'],
    ['.', '.'],
    ['"', "''"]
] },
  {
    sentence: `"Wow! (I didn't expect that.)"`,
expected: [
    ['"', '``'],
    ['Wow', 'UH'],
    ['!', '.'],
    ['(', 'PRN'],
    ['I', 'PRP'],
    ['did', 'VBD'],
    ["n't", 'RB'],
    ['expect', 'VB'],
    ['that', 'DT'], // Note: 'that' is now correctly a DT after the verb 'expect'
    ['.', '.'],
    [')', 'PRN'],
    ['"', "''"]
]  },
      {
    sentence: "This set of scripts jointly support the capability of generating a Word document or PDF from three inputs: Word template, normalized Excel spreadsheets, and a facilitating TSV (designates where to map spreadsheet according to sheet and column header, and insert into named section in the Word template)",
    expected: [
        ["This", "DT"],
        ["set", "NN"],
        ["of", "IN"],
        ["scripts", "NNS"],
        ["jointly", "RB"],
        ["support", "VBP"],
        ["the", "DT"],
        ["capability", "NN"],
        ["of", "IN"],
        ["generating", "VBG"],
        ["a", "DT"],
        ["Word", "NNP"],
        ["document", "NN"],
        ["or", "CC"],
        ["PDF", "NNP"],
        ["from", "IN"],
        ["three", "CD"],
        ["inputs", "NNS"],
        [":", ":"],
        ["Word", "NNP"],
        ["template", "NN"],
        [",", ","],
        ["normalized", "VBN"],
        ["Excel", "NNP"],
        ["spreadsheets", "NNS"],
        [",", ","],
        ["and", "CC"],
        ["a", "DT"],
        ["facilitating", "VBG"],
        ["TSV", "NNP"],
        ["(", "PRN"],
        ["designates", "VBZ"],
        ["where", "WRB"],
        ["to", "TO"],
        ["map", "VB"],
        ["spreadsheet", "NN"],
        ["according", "VBG"],
        ["to", "IN"],
        ["sheet", "NN"],
        ["and", "CC"],
        ["column", "NN"],
        ["header", "NN"],
        [",", ","],
        ["and", "CC"],
        ["insert", "VB"],
        ["into", "IN"],
        ["named", "VBN"],
        ["section", "NN"],
        ["in", "IN"],
        ["the", "DT"],
        ["Word", "NNP"],
        ["template", "NN"],
        [")", "PRN"]
    ]
}
]
    ;
  </script>

  <script>
    function runTests() {
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = ""; // clear old runs if needed

  let passedCount = 0;

  testCases.forEach(({ sentence, expected }, index) => {
    let taggedWordsRaw = tagger.tagSentence(sentence);

    // --- Normalize output: convert objects to [word, tag] arrays ---
    const taggedWords = taggedWordsRaw.map(t => {
      if (Array.isArray(t) && t.length === 2) return t;         // already [word, tag]
      if (t && typeof t === "object" && "word" in t && "tag" in t) return [t.word, t.tag];
      console.warn("Unexpected tag format:", t);
      return ["", ""]; // fallback for safety
    });

    let pass = true;
    let messages = [];

    if (taggedWords.length !== expected.length) {
      pass = false;
      messages.push(
        `Length mismatch: Expected ${expected.length}, but got ${taggedWords.length}`
      );
    }

    taggedWords.forEach(([word, tag], i) => {
      const expectedWord = expected[i]?.[0];
      const expectedTag = expected[i]?.[1];
      if (expectedWord === undefined || expectedTag === undefined) {
        pass = false;
        messages.push(`Undefined expected entry at index ${i}`);
      } else if (word !== expectedWord || tag !== expectedTag) {
        pass = false;
        messages.push(
          `Mismatch at index ${i}: expected [${expectedWord}, ${expectedTag}] but got [${word}, ${tag}]`
        );
      }
    });

    if (pass) passedCount++;

    // --- Build DOM ---
    const testDiv = document.createElement("div");
    testDiv.className = "test-result";
    testDiv.innerHTML = `
      <div>
        <strong>Test #${index + 1}:</strong> ${sentence}<br>
        Result: <span class="${pass ? "pass" : "fail"}">${pass ? "PASS" : "FAIL"}</span>
      </div>
    `;

    const logBtn = document.createElement("button");
    logBtn.textContent = "Show Log";
    const logDiv = document.createElement("div");
    logDiv.className = "log";

    const expectedStr = JSON.stringify(expected);
    const actualStr = JSON.stringify(taggedWords);
    logDiv.textContent =
      `Sentence: ${sentence}\n` +
      `Expected: ${expectedStr}\n` +
      `Actual:   ${actualStr}\n` +
      (messages.length ? `Issues:\n- ${messages.join("\n- ")}` : "All matched ✅");

    logBtn.addEventListener("click", () => {
      logDiv.style.display =
        logDiv.style.display === "block" ? "none" : "block";
      logBtn.textContent =
        logDiv.style.display === "block" ? "Hide Log" : "Show Log";
    });

    testDiv.appendChild(logBtn);
    testDiv.appendChild(logDiv);
    resultsDiv.appendChild(testDiv);
  });

  // Summary
  const summary = document.createElement("h2");
  summary.textContent = `Summary: ${passedCount}/${testCases.length} tests passed`;
  resultsDiv.insertBefore(summary, resultsDiv.firstChild);
}

window.onload = runTests;
  </script>
</body>

</html>